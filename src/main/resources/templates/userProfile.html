
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link rel="apple-touch-icon" sizes="76x76" href="../assets/img/apple-icon.png">
  <link rel="icon" type="image/png" href="../assets/img/favicon.png">
  <title>
    User Profile
  </title>
  <!--     Fonts and icons     -->
  <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700,900|Roboto+Slab:400,700" />
  <!-- Nucleo Icons -->
  <link href="../assets/css/nucleo-icons.css" rel="stylesheet" />
  <link href="../assets/css/nucleo-svg.css" rel="stylesheet" />
  <script src="https://code.jquery.com/jquery-3.6.1.min.js"></script>
  <!-- Font Awesome Icons -->
  <script src="https://kit.fontawesome.com/42d5adcbca.js" crossorigin="anonymous"></script>
  <!-- Material Icons -->
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Round" rel="stylesheet">
  <!-- CSS Files -->
  <link id="pagestyle" href="../assets/css/material-dashboard.css?v=3.0.0" rel="stylesheet" />
</head>

<body class="g-sidenav-show bg-gray-200">
  <div class="main-content position-relative bg-gray-100 max-height-vh-100 h-100">
    <!-- Navbar -->
    <nav class="navbar navbar-main navbar-expand-lg px-0 mx-4 shadow-none border-radius-xl" id="navbarBlur" navbar-scroll="true">
      <div class="container-fluid py-1 px-3">
        
        <div class="collapse navbar-collapse mt-sm-0 mt-2 me-md-0 me-sm-4 d-flex justify-content-end" id="navbar">
          <ul class="navbar-nav  justify-content-end">
		    <li class="nav-item d-flex align-items-center">
              <a th:href="@{/guest/shop}" class="nav-link text-body font-weight-bold px-0 me-3">
                <span class="d-sm-inline d-none">Shop</span>
              </a>
            </li> 
            <li class="nav-item d-flex align-items-center">
              <a th:href="@{/logout}" class="nav-link text-body font-weight-bold px-0">
                <i class="fa fa-user me-sm-1"></i>
                <span class="d-sm-inline d-none">Log out</span>
              </a>
            </li>            
        </div>
      </div>
    </nav>
    <!-- End Navbar -->
    <div class="container-fluid px-2 px-md-4">
      <div class="page-header min-height-300 border-radius-xl " style="background-image: url('https://images.unsplash.com/photo-1531512073830-ba890ca4eba2?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=1920&q=80');">
        <span class="mask  bg-gradient-primary  opacity-6"></span>
      </div>
      <div class="card card-body mx-3 mx-md-4 mt-n6 mb-4">
		  <div class="row">
			  <div class="row gx-4 mb-2">
		          <div class="col-auto">
		            <div class="avatar avatar-xl position-relative">
		              <img src="../assets/img/user_image.jpg" alt="profile_image" class="w-100 border-radius-lg shadow-sm">
		            </div>
		          </div>
		          <div class="col-auto my-auto">
		            <div class="h-100">
		              <h5 class="mb-1 text-capitalize" th:text="${customerData.firstName} + ' ' + ${customerData.lastName}"></h5>
		            </div>
		          </div>
		      </div>
		  </div>
		  <div class="row">
			  <div class="col-12 col-xl-4">
	              <div class="card card-plain h-100">
	                <div class="card-header pb-0 p-3">
	                  <div class="row">
	                    <div class="col-md-8 d-flex align-items-center">
	                      <h5 class="mb-0">Profile Information</h5>
	                    </div>
	                    <div class="col-md-4 text-end">
						  <a th:href="@{/user/changePassword(id=${customerData.customerId})}" >
		                      <i class="fas text-secondary text-sm" data-bs-toggle="tooltip" data-bs-placement="top" title="Change Password">
								   <img src="../assets/fonts/key-solid.svg" alt="Location Icon" width="15px">
							  </i>
		                  </a>
	                      <a th:href="@{/user/editCustomer(id=${customerData.customerId})}" class="ms-2">
	                        <i class="fas fa-user-edit text-secondary text-sm" data-bs-toggle="tooltip" data-bs-placement="top" title="Edit Profile"></i>
	                      </a>
	                      
	                    </div>
	                  </div>
	                  <hr class="horizontal border border-solid-2px border-secondary my-2">
	                </div>
	                <div class="card-body p-4">
	                  <ul class="list-group">
	                    <li class="list-group-item border-0 ps-0 pt-0 text-sm d-flex" >
							<strong class="text-dark">First Name:</strong> &nbsp;
							<h6 th:text="${customerData.firstName}" class="border-0 ps-0 pt-0 text-sm text-capitalize" style="font-weight: normal;">
							</h6>
						</li>
						<li class="list-group-item border-0 ps-0 pt-0 text-sm d-flex" >
							<strong class="text-dark">Last Name:</strong> &nbsp;
							<h6 th:text="${customerData.lastName}" class="border-0 ps-0 pt-0 text-sm text-capitalize" style="font-weight: normal;">
							</h6>
						</li>
						<li class="list-group-item border-0 ps-0 pt-0 text-sm d-flex" >
							<strong class="text-dark">Phone Number:</strong> &nbsp;
							<h6 th:text="${customerData.phoneNumber}" class="border-0 ps-0 pt-0 text-sm text-capitalize" style="font-weight: normal;">
							</h6>
						</li>
						<li class="list-group-item border-0 ps-0 pt-0 text-sm d-flex" >
							<strong class="text-dark">Email Address:</strong> &nbsp;
							<h6 th:text="${customerData.emailId}" class="border-0 ps-0 pt-0 pb-2 text-sm mb-0" style="font-weight: normal;">
							</h6>
						</li>
						<li class="list-group-item border-0 ps-0 pt-0 pb-2 text-sm mb-2" >
							<strong class="text-dark">Location:</strong> &nbsp; India
						</li>	  
						<li class="list-group-item border-0 ps-0 pt-0 text-sm d-flex" >
							<strong class="text-dark">Wallet Balance:</strong> &nbsp;
							<h6 th:text="${customerData.wallet} + ' Rs'" class="border-0 ps-0 pt-0 text-sm" style="font-weight: normal;">
							</h6>
						</li>   
						<li class="list-group-item border-0 ps-0 pt-0 text-sm d-flex" >
							<strong class="text-dark">Referral Code:</strong> &nbsp;
							<h6 th:text="${customerData.referralCode}" class="border-0 ps-0 pt-0 text-sm" style="font-weight: normal;">
							</h6>
						</li> 
						<li class="list-group-item border-0 ps-0 pt-0 text-sm d-flex justify-content-center " >
							<strong class="text-dark fs-5 text-wrap">Refer your friends and earn upto 1000Rs !!!</strong> &nbsp;
						</li>
	                  </ul>
						<form id="emailForm">
							<label for="email">Email Address:</label>
							<input class="rounded col-12" type="email" id="email" name="email" required>
							<button class="btn btn-primary mt-2" type="submit" id="sendEmail">Share Referral Code</button>
						</form>

						<div class="bg-info text-black" id="response"></div>
	                </div>
	              </div>
              </div>
              
              <div class="col-12 col-xl-8">
				  <div class="col-12 d-flex justify-content-end">
					  <a th:href="@{/user/viewOrders}" class="btn btn-outline-secondary me-2 mb-2">View Orders</a>
					  <a th:href="@{/user/addAddress(id=${customerData.customerId})}" class="btn btn-success me-4 mb-2">Add Address</a>
				  </div>
	              <div class="card card-plain border border-secondary mt-3" th:each="address:${addressList}">
	                <div class="card-header pb-0 p-3">
	                  <div class="row">
	                    <div class="col-md-8 d-flex align-items-center">
	                      <h6 class="mb-0">Address Details</h6>
	                    </div>
	                    <div class="col-md-4 d-flex justify-content-end pe-4 pb-2">
							<a th:href="@{/user/editAddress(id=${address.addressId})}" >
		                      <i class="fas text-secondary text-sm" data-bs-toggle="tooltip" data-bs-placement="top" title="Edit Address">
								   <img src="../assets/fonts/location-dot-solid.svg" alt="Location Icon" width="15px">
							  </i>
		                    </a>
		                    
		                    <a th:href="@{/user/deleteAddress(id=${address.addressId})}" class="ms-3">
		                      <i class="fas text-secondary text-sm" data-bs-toggle="tooltip" data-bs-placement="top" title="Remove">
								   <img src="../assets/fonts/minus-solid.svg" alt="Location Icon" width="15px">
							  </i>
		                    </a>
						</div>
	                  </div>
	                  <hr class="horizontal border border-solid-3px border-secondary my-2">
	                </div>
	                
	                <div class="card-body p-3">
	                  <ul class="list-group">
	                    <li class="list-group-item border-0 ps-0 pt-0 text-sm d-flex" >
							<strong class="text-dark">Address Line 1:</strong> &nbsp;
							<h6 th:text="${address.addressLineOne}" class="border-0 ps-2 pt-0 text-sm text-capitalize" style="font-weight: normal;">
							</h6>
						</li>
						<li class="list-group-item border-0 ps-0 pt-0 text-sm d-flex" >
							<strong class="text-dark">Address Line 2:</strong> &nbsp;
							<h6 th:text="${address.addressLineTwo}" class="border-0 ps-2 pt-0 text-sm text-capitalize" style="font-weight: normal;">
							</h6>
						</li>
						<li class="list-group-item border-0 ps-0 pt-0 text-sm d-flex" >
							<strong class="text-dark">City:</strong> &nbsp;
							<h6 th:text="${address.city}" class="border-0 ps-2 pt-0 text-sm text-capitalize" style="font-weight: normal;">
							</h6>
						</li>
						<li class="list-group-item border-0 ps-0 pt-0 text-sm d-flex" >
							<strong class="text-dark">State:</strong> &nbsp;
							<h6 th:text="${address.state}" class="border-0 ps-2 pt-0 text-sm text-capitalize" style="font-weight: normal;">
							</h6>
						</li>
						<li class="list-group-item border-0 ps-0 pt-0 text-sm d-flex" >
							<strong class="text-dark">Pin code:</strong> &nbsp;
							<h6 th:text="${address.pinCode}" class="border-0 ps-2 pt-0 text-sm text-capitalize" style="font-weight: normal;">
							</h6>
						</li>
	                  </ul>
	                </div>
	              </div>   
              </div>
		  </div>
      </div>
    </div>
  </div>

  <script>
	  $(document).ready(function () {
          $('#emailForm').submit(function (e) {
              e.preventDefault();
              var email = $('#email').val();
				console.log(email);
              $.ajax({
                  type: 'POST',
                  url: '/user/shareReferralCode',
                  contentType: 'application/json',
				  data: JSON.stringify(email),
                  success: function (data) {
                      $('#response').text('Email sent successfully');
                  },
                  error: function () {
                      $('#response').text('Error sending email');
                  }
              });
          });
      });
  </script>



  <!--   Core JS Files   -->
  <script src="../assets/js/core/popper.min.js"></script>
  <script src="../assets/js/core/bootstrap.min.js"></script>
  <script src="../assets/js/plugins/perfect-scrollbar.min.js"></script>
  <script src="../assets/js/plugins/smooth-scrollbar.min.js"></script>
  <script>
    var win = navigator.platform.indexOf('Win') > -1;
    if (win && document.querySelector('#sidenav-scrollbar')) {
      var options = {
        damping: '0.5'
      }
      Scrollbar.init(document.querySelector('#sidenav-scrollbar'), options);
    }
  </script>
  <!-- Github buttons -->
  <script async defer src="https://buttons.github.io/buttons.js"></script>
  <!-- Control Center for Material Dashboard: parallax effects, scripts for the example pages etc -->
  <script src="../assets/js/material-dashboard.min.js?v=3.0.0"></script>
</body>

</html>